#!/usr/bin/perl
use strict;
use warnings;
use Volans;

use Getopt::Long;
use Pod::Usage;

GetOptions(
    'help'      => \my $help,
	'c=s'       => \my $config_file_path,
    'g=s'       => \my $group_name,
    'version'   => \my $version,
) or pod2usage(0);
if ($version) {
    print "Volans: $Volans::VERSION\n";
    exit(0);
}
pod2usage(2) unless $group;
pod2usage(1) if $help;

&main;exit;

sub main {
    Volans->new(
        config_file_path => $config_file_path,
        group_name       => $group_name,
    )->run();
}

__END__

=head1 NAME

volans - deploy tool 

=head1 SYNOPSIS

    # create config file
    mkdir ~/.volans
    cat >> ~/.volans/config.pl
    {
        hooks => {
            echo => q{echo "hello"},
        },
        groups => {
            'group_01' => {
                'before_hooks' => [qw/echo/],
                'after_hooks'  => [qw/echo/],
                'hosts'        => [qw/127.0.0.1/],
                'cmd'          => sub {
                    return sprintf(qq{ssh %s 'echo "hello"'},$_[0]); 
                },
            },
        },
    };
    
    % volans -g group_01 

        -g       group name
        -c       config file path
        --help   Show this help

=head1 AUTHOR

Hiroyuki Yamanaka

=cut
